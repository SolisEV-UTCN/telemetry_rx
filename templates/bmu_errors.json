[{"apiVersion":"influxdata.com/v2alpha1","kind":"Dashboard","metadata":{"name":"zealous-montalcini-2d2001"},"spec":{"charts":[{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"10","name":"y","scale":"linear"}],"colorizeRows":true,"colors":[{"id":"92z5mrjDu7gl-NdmSnNEC","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"ySKjuW_JXNc6MHfbfxj5N","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"IXAI7gwPCl0Fv_l-E90eG","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":4,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"BMU Status","opacity":1,"orientationThreshold":100000000,"position":"overlaid","queries":[{"query":"from(bucket: \"nires_2025\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"solar_vehicle\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"BMU_StatusFlags\")\r\n  |> filter(fn: (r) => r[\"ecu\"] == \"BMU\")\r\n  //|> last()\r\n  |> map(fn: (r) => ({\r\n      r with \r\n      _value: \r\n        if (int(v: r._value) >= 128) then 8 //bit 7 -> CMU CAN bus power status\r\n        else if (int(v: r._value) >= 64) then 7 //bit 6 -> BMU is in Setup mode\r\n        else if (int(v: r._value) >= 32) then 6 //bit 5 -> Vehicle Communications Timeout (lost EVDC)\r\n        else if (int(v: r._value) >= 16) then 5 //bit 4 -> CMU Communications Timeout (lost CMU)\r\n        else if (int(v: r._value) >= 8) then 4 //bit 3 -> Measurement Untrusted (redundant channel mismatch)\r\n        else if (int(v: r._value) >= 4) then 3 //bit 2 -> Cell Over Temperature\r\n        else if (int(v: r._value) >= 2) then 2 //bit 1 -> Cell Under Voltage\r\n        else if (int(v: r._value) >= 1) then 1 //bit 0 -> Cell Over Voltage\r\n        else 0 //OK\r\n    }))"}],"staticLegend":{"colorizeRows":true,"opacity":1,"orientationThreshold":100000000,"widthRatio":1},"width":6,"widthRatio":1,"xCol":"_time","yCol":"_value"},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"10","name":"y","scale":"linear"}],"colorizeRows":true,"colors":[{"id":"92z5mrjDu7gl-NdmSnNEC","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"ySKjuW_JXNc6MHfbfxj5N","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"IXAI7gwPCl0Fv_l-E90eG","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":4,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"BMU DriverControlSwitch","opacity":1,"orientationThreshold":100000000,"position":"overlaid","queries":[{"query":"from(bucket: \"nires_2025\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"solar_vehicle\")\n  |> filter(fn: (r) => r[\"_field\"] == \"BMU_State\")\n  |> filter(fn: (r) => r[\"ecu\"] == \"Dashboard\")\n  |> map(fn: (r) => ({r with _value: \n        if (int(v: r._value) >= 8) then 4 //bit 3 -> Ignition Start\n        else if (int(v: r._value) >= 4) then 3 //bit 2 -> Ignition Run\n        else if (int(v: r._value) >= 2) then 2 //bit 1 -> Accesories\n        else if (int(v: r._value) == 1) then 1 //bit 0\n        else 0 //Off/Safe\n        }))"}],"staticLegend":{"colorizeRows":true,"opacity":1,"orientationThreshold":100000000,"widthRatio":1},"width":6,"widthRatio":1,"xCol":"_time","xPos":3,"yCol":"_value","yPos":4},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"10","name":"y","scale":"linear"}],"colorizeRows":true,"colors":[{"id":"92z5mrjDu7gl-NdmSnNEC","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"ySKjuW_JXNc6MHfbfxj5N","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"IXAI7gwPCl0Fv_l-E90eG","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":4,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"BMU Precharge State","opacity":1,"orientationThreshold":100000000,"position":"overlaid","queries":[{"query":"from(bucket: \"nires_2025\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"solar_vehicle\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"BMU_PreChargeState\")\r\n  |> filter(fn: (r) => r[\"ecu\"] == \"BMU\")\r\n  //|> last()\r\n  |> map(fn: (r) => ({\r\n      r with \r\n      _value: \r\n        if (int(v: r._value) >= 32) then 5 //bit 5 -> Enable pack\r\n        else if (int(v: r._value) >= 16) then 4 //bit 4 -> Run\r\n        else if (int(v: r._value) >= 8) then 3 //bit 3 -> Pre-charge\r\n        else if (int(v: r._value) >= 4) then 2 //bit 2 -> Measure\r\n        else if (int(v: r._value) >= 2) then 1 //bit 1 -> Idle\r\n        else if (int(v: r._value) == 1) then 0 //bit 0 -> Error\r\n        else 0\r\n    }))"}],"staticLegend":{"colorizeRows":true,"opacity":1,"orientationThreshold":100000000,"widthRatio":1},"width":6,"widthRatio":1,"xCol":"_time","xPos":6,"yCol":"_value"}],"name":"BMU Errors"}}]